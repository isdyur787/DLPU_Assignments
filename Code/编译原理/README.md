# 词法分析器 - 编译原理小组任务 1

#By DLPU 计互231 2组：邵昱铭 孙智博 王宝飞 肖宇航

## 项目简介

这是我们2组用 Python 实现的词法分析器，用于识别程序设计语言中的单词符号。程序提供了图形化界面，支持文件输入和手动输入，能够将源代码分解为各类单词并以二元组形式输出。

## 功能特性

### 1. 支持的单词类型

#### 关键字 (种别码 1-20)

- `if`, `else`, `while`, `for`
- `int`, `float`, `char`, `string`
- `return`, `void`, `main`
- `printf`, `scanf`
- `break`, `continue`

#### 运算符 (种别码 21-30)

- 算术运算符: `+`, `-`, `*`, `/`
- 赋值运算符: `=`
- 比较运算符: `==`, `!=`, `<`, `>`, `<=`

#### 界符 (种别码 31-45)

- 大括号: `{`, `}`
- 方括号: `[`, `]`
- 小括号: `(`, `)`
- 分号: `;`
- 逗号: `,`
- 点号: `.`
- 冒号: `:`

#### 标识符 (种别码 46)

- 命名规则: 以字母或下划线开头，可包含字母、数字、下划线
- 示例: `variable`, `_temp`, `count123`

#### 常量 (种别码 47-50)

- 整数常量: `123`, `456`
- 浮点数常量: `3.14`, `2.718`
- 字符串常量: `"Hello World"`
- 字符常量: `'A'`, `'b'`

### 2. 主要功能

1. **图形化界面**: 基于 tkinter 的友好用户界面
2. **文件输入**: 支持打开.c、.cpp、.txt 等文件
3. **手动输入**: 支持直接在界面中输入源代码
4. **实时分析**: 点击按钮即可进行词法分析
5. **结果展示**: 以二元组形式显示分析结果
6. **错误处理**: 识别并报告无法识别的字符

### 3. 输出格式

程序输出二元组 `(syn, token/sum)`，其中：

- `syn`: 单词种别码
- `token`: 单词字符串（对于标识符、关键字、运算符、界符）
- `sum`: 数值（对于整数和浮点数常量）

## 使用方法

### 运行程序

```bash
python lexical_analyzer.py
```

### 操作步骤

1. 启动程序后，在输入框中输入源代码或点击"打开文件"按钮加载文件
2. 点击"分析代码"按钮开始词法分析
3. 在输出区域查看分析结果
4. 使用"清空"按钮清除所有内容

### 示例代码

程序内置了示例代码，包含常见的 C 语言语法结构：

```c
int main() {
    int a = 10;
    float b = 3.14;
    char c = 'A';
    string str = "Hello 编译原理，我们是二组";

    if (a > 5) {
        printf("a is greater than 5");
        a = a + 1;
    } else {
        a = a - 1;
    }

    while (a < 20) {
        a = a * 2;
        if (a == 16) break;
    }

    return 0;
}
```

## 技术实现

### 核心类说明

1. **TokenType**: 定义所有单词种别码
2. **LexicalAnalyzer**: 词法分析器核心类

   - `get_next_token()`: 获取下一个单词符号
   - `analyze()`: 分析整个源代码
   - `skip_whitespace()`: 跳过空白字符
   - `read_identifier()`: 读取标识符
   - `read_number()`: 读取数字
   - `read_string()`: 读取字符串

3. **LexicalAnalyzerGUI**: 图形界面类
   - 提供用户友好的操作界面
   - 支持文件操作和代码分析
   - 实时显示分析结果

### 算法特点

1. **状态机设计**: 使用有限状态自动机进行单词识别
2. **前瞻技术**: 支持双字符运算符的识别
3. **错误恢复**: 遇到错误字符时继续分析后续内容
4. **空白处理**: 自动跳过空格、制表符、换行符等

## 测试用例

项目包含多个测试用例，覆盖各种语法结构：

1. **简单 C 程序**: 基本的函数定义和调用
2. **运算符和界符**: 各种运算符和界符的组合
3. **循环和条件**: 控制流语句的识别
4. **复杂表达式**: 嵌套表达式和复合语句
5. **错误字符测试**: 非法字符的处理

## 扩展功能

程序支持以下扩展：

- 添加更多关键字和运算符
- 支持注释处理
- 添加行号和列号信息
- 支持更多数据类型
- 添加语法高亮显示

## 运行环境

- Python 3.6+
- tkinter (通常随 Python 安装)
- 无需额外依赖包
